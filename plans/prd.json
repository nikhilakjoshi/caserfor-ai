[
  {
    "id": "D1-1",
    "section": "D1",
    "title": "Create RoleProvider context",
    "description": "components/role-provider.tsx - React context {role, setRole, clientId}. Read role from NextAuth session, dev override from localStorage key 'dev-role-override'. Export useRole hook.",
    "status": "done",
    "dependencies": []
  },
  {
    "id": "D1-2",
    "section": "D1",
    "title": "Create DevRoleToggle component",
    "description": "components/dev-role-toggle.tsx - pill/switch in header, only renders when NODE_ENV=development. Toggles between lawyer/applicant, persists to localStorage.",
    "status": "done",
    "dependencies": ["D1-1"]
  },
  {
    "id": "D1-3",
    "section": "D1",
    "title": "Wrap root layout with RoleProvider",
    "description": "app/layout.tsx - wrap children with <RoleProvider>. Add DevRoleToggle to header area.",
    "status": "done",
    "dependencies": ["D1-1", "D1-2"]
  },
  {
    "id": "D2-1",
    "section": "D2",
    "title": "Create (cases) route group layout",
    "description": "app/(cases)/cases/[clientId]/layout.tsx - role-aware layout. Lawyer: dual sidebar (AppSidebar collapsed + CaseSidebar). Applicant: AppSidebar only. Use useRole() to determine.",
    "status": "done",
    "dependencies": ["D1-1"]
  },
  {
    "id": "D2-2",
    "section": "D2",
    "title": "Create case overview page",
    "description": "app/(cases)/cases/[clientId]/page.tsx - case header + summary. Fetch case data by clientId. Reuse existing case detail components where possible.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D2-3",
    "section": "D2",
    "title": "Convert /my-case to redirect",
    "description": "app/(dashboard)/my-case/page.tsx - server redirect to /cases/{clientId}. Fetch clientId from session, redirect().",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D2-4",
    "section": "D2",
    "title": "Update AppSidebar My Case link",
    "description": "Update AppSidebar 'My Case' nav item href to resolve to /cases/[clientId] using RoleProvider clientId.",
    "status": "done",
    "dependencies": ["D1-1", "D2-1"]
  },
  {
    "id": "D2-5",
    "section": "D2",
    "title": "Move drafts routes to (cases) group",
    "description": "Move drafts routes from (lawyer)/cases/[clientId]/drafts/ to (cases)/cases/[clientId]/drafts/. Update imports.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D2-6",
    "section": "D2",
    "title": "Update middleware for /cases/* access",
    "description": "middleware.ts - allow both lawyer and applicant roles on /cases/* routes.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D2-7",
    "section": "D2",
    "title": "Create case-level auth utility",
    "description": "lib/case-auth.ts - authorization checks: lawyer can access any case, applicant only their own. Export canAccessCase(session, clientId).",
    "status": "done",
    "dependencies": []
  },
  {
    "id": "D3-1",
    "section": "D3",
    "title": "Create CaseSidebar component",
    "description": "components/case-sidebar.tsx - shadcn Sidebar (side='right' or second sidebar). Takes clientId prop. Nav items: Overview, Documents, Recommenders, Drafts (collapsible), Timeline, Gap Analysis, Assistant.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D3-2",
    "section": "D3",
    "title": "CaseSidebar: Overview nav item",
    "description": "Link to /cases/[clientId]",
    "status": "done",
    "dependencies": ["D3-1"]
  },
  {
    "id": "D3-3",
    "section": "D3",
    "title": "CaseSidebar: Documents nav item",
    "description": "Link to /cases/[clientId]/vault",
    "status": "done",
    "dependencies": ["D3-1"]
  },
  {
    "id": "D3-4",
    "section": "D3",
    "title": "CaseSidebar: Recommenders nav item",
    "description": "Link to /cases/[clientId]/recommenders",
    "status": "done",
    "dependencies": ["D3-1"]
  },
  {
    "id": "D3-5",
    "section": "D3",
    "title": "CaseSidebar: Drafts collapsible with 7 doc types",
    "description": "Collapsible nav group linking to /cases/[clientId]/drafts with sub-items for each doc type (personal-statement, research-summary, etc.)",
    "status": "done",
    "dependencies": ["D3-1"]
  },
  {
    "id": "D3-6",
    "section": "D3",
    "title": "CaseSidebar: Timeline, Gap Analysis, Assistant nav items",
    "description": "Links to /cases/[clientId]/timeline, /gap-analysis, /assistant",
    "status": "done",
    "dependencies": ["D3-1"]
  },
  {
    "id": "D3-7",
    "section": "D3",
    "title": "Create vault sub-page",
    "description": "app/(cases)/cases/[clientId]/vault/page.tsx - extract documents tab content into standalone page.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D3-8",
    "section": "D3",
    "title": "Create recommenders sub-page",
    "description": "app/(cases)/cases/[clientId]/recommenders/page.tsx - extract recommenders tab content into standalone page.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D3-9",
    "section": "D3",
    "title": "Create gap-analysis sub-page",
    "description": "app/(cases)/cases/[clientId]/gap-analysis/page.tsx - extract gap analysis tab content into standalone page.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D3-10",
    "section": "D3",
    "title": "Create assistant sub-page",
    "description": "app/(cases)/cases/[clientId]/assistant/page.tsx - extract AI assistant tab content into standalone page.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D3-11",
    "section": "D3",
    "title": "Create timeline placeholder page",
    "description": "app/(cases)/cases/[clientId]/timeline/page.tsx - placeholder with 'coming soon' toast.",
    "status": "done",
    "dependencies": ["D2-1"]
  },
  {
    "id": "D4-1",
    "section": "D4",
    "title": "Create dashboard stats API",
    "description": "app/api/lawyer/dashboard/stats/route.ts - returns {activeCases, pendingReview, draftsInProgress, unassigned} counts from DB.",
    "status": "done",
    "dependencies": []
  },
  {
    "id": "D4-2",
    "section": "D4",
    "title": "Create greeting component",
    "description": "Time-of-day greeting (Good morning/afternoon/evening) + lawyer name from session.",
    "status": "done",
    "dependencies": []
  },
  {
    "id": "D4-3",
    "section": "D4",
    "title": "Create dashboard chat input component",
    "description": "components/lawyer/dashboard-chat.tsx - centered text input for assistant queries. Accepts optional prefilled text prop.",
    "status": "done",
    "dependencies": []
  },
  {
    "id": "D4-4",
    "section": "D4",
    "title": "Create quick action buttons component",
    "description": "Row of 4 buttons that prepopulate dashboard chat input with predefined queries.",
    "status": "done",
    "dependencies": ["D4-3"]
  },
  {
    "id": "D4-5",
    "section": "D4",
    "title": "Create stat cards row component",
    "description": "4 stat cards fetching from /api/lawyer/dashboard/stats. Active cases, pending review, drafts in progress, unassigned.",
    "status": "done",
    "dependencies": ["D4-1"]
  },
  {
    "id": "D4-6",
    "section": "D4",
    "title": "Create case table component",
    "description": "components/lawyer/case-table.tsx - shadcn Table with search. Columns: Name, Status, Updated, Visa Type (fieldOfExpertise), Case Files count.",
    "status": "done",
    "dependencies": []
  },
  {
    "id": "D4-7",
    "section": "D4",
    "title": "Add Create Case + Upload Files stub buttons",
    "description": "Buttons above case table that show 'coming soon' toast on click.",
    "status": "done",
    "dependencies": ["D4-6"]
  },
  {
    "id": "D4-8",
    "section": "D4",
    "title": "Assemble lawyer dashboard page",
    "description": "app/(lawyer)/dashboard/page.tsx - compose greeting + chat + quick actions + stats + table.",
    "status": "done",
    "dependencies": ["D4-2", "D4-3", "D4-4", "D4-5", "D4-6", "D4-7"]
  },
  {
    "id": "D5-1",
    "section": "D5",
    "title": "Create get_all_cases tool",
    "description": "lib/dashboard-agent-tools.ts - tool returning all cases for the lawyer with summary fields.",
    "status": "done",
    "dependencies": []
  },
  {
    "id": "D5-2",
    "section": "D5",
    "title": "Add get_case_detail tool",
    "description": "Tool returning full case detail for a given clientId.",
    "status": "done",
    "dependencies": ["D5-1"]
  },
  {
    "id": "D5-3",
    "section": "D5",
    "title": "Add search_vault tool",
    "description": "Tool wrapping queryRelevantChunks for RAG search within a case's vault.",
    "status": "done",
    "dependencies": ["D5-1"]
  },
  {
    "id": "D5-4",
    "section": "D5",
    "title": "Add gap_analysis + eligibility + drafts tools",
    "description": "get_gap_analysis(clientId), get_eligibility_report(clientId), get_existing_drafts(clientId) tools.",
    "status": "done",
    "dependencies": ["D5-1"]
  },
  {
    "id": "D5-5",
    "section": "D5",
    "title": "Create dashboard assistant API route",
    "description": "app/api/lawyer/assistant/route.ts - ToolLoopAgent with dashboard tools, streaming response.",
    "status": "done",
    "dependencies": ["D5-1", "D5-2", "D5-3", "D5-4"]
  },
  {
    "id": "D5-6",
    "section": "D5",
    "title": "Wire dashboard chat to assistant API",
    "description": "Update dashboard-chat.tsx to use useChat with /api/lawyer/assistant. Render messages below input. Quick action buttons prepopulate input text.",
    "status": "done",
    "dependencies": ["D4-3", "D4-4", "D5-5"]
  }
]
